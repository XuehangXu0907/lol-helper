# è‹±é›„é€‰æ‹©å™¨å®Œæ•´è®¾è®¡æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†League of Legendsè‹±é›„é€‰æ‹©å™¨çš„å®Œæ•´åŠŸèƒ½ã€æŠ€æœ¯æ¶æ„å’Œå®æ–½ç»†èŠ‚ï¼Œç”¨äºæŒ‡å¯¼Javaç‰ˆæœ¬çš„é«˜æ€§èƒ½å®ç°ã€‚

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚

### 1. è§†è§‰åŒ–è‹±é›„é€‰æ‹©ç³»ç»Ÿ
- **ç½‘æ ¼åŒ–å±•ç¤º**ï¼šä»¥100x100pxè‹±é›„å¤´åƒä¸ºä¸»çš„é€‰æ‹©ç•Œé¢
- **å³æ—¶æœç´¢**ï¼š200msé˜²æŠ–æœºåˆ¶ï¼Œæ”¯æŒä¸­è‹±æ–‡åç§°ã€å…³é”®è¯æœç´¢
- **å“åº”å¼å¸ƒå±€**ï¼šæ ¹æ®çª—å£å®½åº¦è‡ªåŠ¨è°ƒæ•´æ¯è¡Œè‹±é›„æ•°é‡ï¼ˆ3-12åˆ—ï¼‰
- **é€‰æ‹©åé¦ˆ**ï¼šé€‰ä¸­è‹±é›„æ—¶é«˜äº®æ˜¾ç¤ºï¼Œæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯

### 2. è‹±é›„å¤´åƒç³»ç»Ÿ
- **å®˜æ–¹èµ„æº**ï¼šä»Riot Games CDNè·å–é«˜è´¨é‡å¤´åƒ
- **ç‰ˆæœ¬ç®¡ç†**ï¼šé’ˆå¯¹ä¸åŒè‹±é›„ä½¿ç”¨å¯¹åº”çš„Data Dragon APIç‰ˆæœ¬
- **æœ¬åœ°ç¼“å­˜**ï¼šé¿å…é‡å¤ä¸‹è½½ï¼Œæå‡åŠ è½½é€Ÿåº¦
- **å¼‚æ­¥åŠ è½½**ï¼šä¸é˜»å¡UIï¼Œæ¸è¿›å¼æ˜¾ç¤º
- **é”™è¯¯å¤„ç†**ï¼šæä¾›é»˜è®¤å ä½å›¾ï¼Œå¤„ç†ç½‘ç»œå¼‚å¸¸

### 3. è‹±é›„æŠ€èƒ½ä¿¡æ¯ç³»ç»Ÿ
- **å®Œæ•´æŠ€èƒ½æ•°æ®**ï¼šè¢«åŠ¨æŠ€èƒ½ + Q/W/E/Rå››ä¸ªä¸»åŠ¨æŠ€èƒ½
- **è¯¦ç»†æ•°å€¼**ï¼šä¼¤å®³æ•°å€¼ã€å†·å´æ—¶é—´ã€æ¶ˆè€—ã€æ–½æ”¾è·ç¦»
- **ä¸­æ–‡æœ¬åœ°åŒ–**ï¼šä½¿ç”¨Riotå®˜æ–¹ä¸­æ–‡API
- **æ ¼å¼åŒ–æ˜¾ç¤º**ï¼šç»“æ„åŒ–å±•ç¤ºæŠ€èƒ½ä¿¡æ¯
- **å¼‚æ­¥è·å–**ï¼šåå°åŠ è½½ï¼Œä¸å½±å“ä¸»ç•Œé¢æ“ä½œ

### 4. ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- **è‡ªç„¶åŠ è½½è¿‡æ¸¡**ï¼šéª¨æ¶å±æ›¿ä»£ç”Ÿç¡¬çš„loadingç•Œé¢
- **æµç•…äº¤äº’**ï¼šæ— å¡é¡¿çš„æœç´¢å’Œé€‰æ‹©ä½“éªŒ
- **æ™ºèƒ½å¸ƒå±€**ï¼šé€‚åº”ä¸åŒå±å¹•å°ºå¯¸å’Œçª—å£å¤§å°
- **é”™è¯¯æ¢å¤**ï¼šç½‘ç»œå¼‚å¸¸æ—¶çš„ä¼˜é›…é™çº§

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„è®¾è®¡

### æ¨¡å—åŒ–æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ChampionSelector           â”‚
â”‚         (ä¸»æ§åˆ¶å™¨/UIç®¡ç†)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ChampionDataManager | AvatarManager â”‚
â”‚     (æ•°æ®ç®¡ç†)        |   (å¤´åƒç®¡ç†)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SkillsManager    | LayoutManager    â”‚
â”‚   (æŠ€èƒ½ä¿¡æ¯)       |   (å“åº”å¼å¸ƒå±€)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CacheManager     | NetworkManager   â”‚
â”‚   (ç¼“å­˜ç®¡ç†)       |   (ç½‘ç»œè¯·æ±‚)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶è¯´æ˜

#### 1. ChampionSelector (ä¸»æ§åˆ¶å™¨)
- **èŒè´£**ï¼šUIäº‹ä»¶å¤„ç†ã€ç»„ä»¶åè°ƒã€ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **æ¥å£**ï¼šæœç´¢é˜²æŠ–ã€é€‰æ‹©å›è°ƒã€çª—å£äº‹ä»¶ç›‘å¬
- **çŠ¶æ€ç®¡ç†**ï¼šå½“å‰é€‰ä¸­è‹±é›„ã€æœç´¢çŠ¶æ€ã€å¸ƒå±€çŠ¶æ€

#### 2. ChampionDataManager (æ•°æ®ç®¡ç†å™¨)
- **èŒè´£**ï¼šè‹±é›„åŸºç¡€æ•°æ®ç®¡ç†ã€æœç´¢è¿‡æ»¤
- **æ•°æ®æº**ï¼šæœ¬åœ°è‹±é›„æ•°æ®åº“ã€å…³é”®è¯æ˜ å°„
- **åŠŸèƒ½**ï¼šæ¨¡ç³Šæœç´¢ã€æ‹¼éŸ³æœç´¢ã€å…³é”®è¯åŒ¹é…

#### 3. AvatarManager (å¤´åƒç®¡ç†å™¨)
- **èŒè´£**ï¼šå¤´åƒä¸‹è½½ã€ç¼“å­˜ã€å¼‚æ­¥åŠ è½½
- **ç¼“å­˜ç­–ç•¥**ï¼šå†…å­˜LRU + æœ¬åœ°æ–‡ä»¶ç¼“å­˜
- **æ€§èƒ½ä¼˜åŒ–**ï¼šè¿æ¥æ± å¤ç”¨ã€å¹¶å‘æ§åˆ¶

#### 4. SkillsManager (æŠ€èƒ½ç®¡ç†å™¨)
- **èŒè´£**ï¼šæŠ€èƒ½æ•°æ®è·å–ã€è§£æã€æ ¼å¼åŒ–
- **æ•°æ®æº**ï¼šRiot Data Dragon API
- **è§£æé€»è¾‘**ï¼šæå–æ•°å€¼ä¿¡æ¯ã€æ ¼å¼åŒ–æè¿°

#### 5. ResponsiveLayoutManager (å“åº”å¼å¸ƒå±€)
- **èŒè´£**ï¼šåŠ¨æ€è®¡ç®—åˆ—æ•°ã€é‡æ’å¸ƒå±€
- **è®¡ç®—é€»è¾‘**ï¼šåŸºäºçª—å£å®½åº¦å’ŒæŒ‰é’®å°ºå¯¸
- **ä¼˜åŒ–ç­–ç•¥**ï¼šé˜²æŠ–å¤„ç†ã€å¢é‡æ›´æ–°

---

## ğŸ“Š æ•°æ®æ¨¡å‹è®¾è®¡

### è‹±é›„æ•°æ®æ¨¡å‹
```java
public class Champion {
    private String key;           // è‹±é›„Key (å¦‚: "Jinx")
    private String id;            // è‹±é›„ID (æ•°å­—)
    private String nameEn;        // è‹±æ–‡åç§°
    private String nameCn;        // ä¸­æ–‡åç§°
    private List<String> keywords; // å…³é”®è¯åˆ—è¡¨
    private String title;         // ç§°å·
    private List<String> tags;    // æ ‡ç­¾ (å¦‚: ["Marksman", "Assassin"])
}
```

### æŠ€èƒ½æ•°æ®æ¨¡å‹
```java
public class ChampionSkills {
    private Skill passive;       // è¢«åŠ¨æŠ€èƒ½
    private List<Skill> spells;  // ä¸»åŠ¨æŠ€èƒ½ (Q/W/E/R)
}

public class Skill {
    private String name;         // æŠ€èƒ½åç§°
    private String description;  // æŠ€èƒ½æè¿°
    private String tooltip;      // è¯¦ç»†è¯´æ˜
    private String cooldown;     // å†·å´æ—¶é—´
    private String cost;         // æ¶ˆè€—
    private String range;        // æ–½æ”¾è·ç¦»
    private String damage;       // ä¼¤å®³ä¿¡æ¯
}
```

### å¤´åƒç¼“å­˜æ¨¡å‹
```java
public class AvatarCache {
    private String championKey;
    private String url;
    private Path localPath;
    private long downloadTime;
    private boolean isValid;
}
```

---

## ğŸš€ Javaå®ç°æŒ‡å—

### æ¨èæŠ€æœ¯æ ˆ
- **UIæ¡†æ¶**: JavaFX 17+ (ç°ä»£åŒ–ã€é«˜æ€§èƒ½ã€è·¨å¹³å°)
- **HTTPå®¢æˆ·ç«¯**: OkHttp 4.x (è¿æ¥æ± ã€å¼‚æ­¥è¯·æ±‚)
- **JSONå¤„ç†**: Jackson 2.x (é«˜æ€§èƒ½ã€åŠŸèƒ½ä¸°å¯Œ)
- **å›¾åƒå¤„ç†**: JavaFX Image + BufferedImage
- **ç¼“å­˜æ¡†æ¶**: Caffeine (é«˜æ€§èƒ½å†…å­˜ç¼“å­˜)
- **å¼‚æ­¥ç¼–ç¨‹**: CompletableFuture + ForkJoinPool

### æ ¸å¿ƒç±»è®¾è®¡

#### 1. ä¸»æ§åˆ¶å™¨å®ç°
```java
@Component
public class ChampionSelectorController {
    private static final int SEARCH_DEBOUNCE_MS = 200;
    private static final int RESIZE_DEBOUNCE_MS = 300;
    
    @FXML private GridPane championGrid;
    @FXML private TextField searchField;
    @FXML private VBox skillsContainer;
    
    private final ChampionDataManager dataManager;
    private final AvatarManager avatarManager;
    private final SkillsManager skillsManager;
    private final ResponsiveLayoutManager layoutManager;
    
    private Timeline searchTimeline;
    private Timeline resizeTimeline;
    private int currentColumns;
    private Champion selectedChampion;
    
    @FXML
    public void initialize() {
        setupSearchDebounce();
        setupResponsiveLayout();
        loadChampionsWithSkeleton();
    }
    
    private void setupSearchDebounce() {
        searchTimeline = new Timeline();
        searchField.textProperty().addListener((obs, oldText, newText) -> {
            searchTimeline.stop();
            searchTimeline.getKeyFrames().clear();
            searchTimeline.getKeyFrames().add(
                new KeyFrame(Duration.millis(SEARCH_DEBOUNCE_MS), 
                    e -> performSearch(newText))
            );
            searchTimeline.play();
        });
    }
    
    private void setupResponsiveLayout() {
        Scene scene = championGrid.getScene();
        scene.widthProperty().addListener((obs, oldWidth, newWidth) -> {
            resizeTimeline.stop();
            resizeTimeline.getKeyFrames().clear();
            resizeTimeline.getKeyFrames().add(
                new KeyFrame(Duration.millis(RESIZE_DEBOUNCE_MS),
                    e -> handleWindowResize(newWidth.doubleValue()))
            );
            resizeTimeline.play();
        });
    }
}
```

#### 2. å¤´åƒç®¡ç†å™¨å®ç°
```java
@Service
public class AvatarManager {
    private static final int MEMORY_CACHE_SIZE = 200;
    private static final Duration CACHE_EXPIRE_TIME = Duration.ofHours(24);
    private static final String DDRAGON_URL_TEMPLATE = 
        "https://ddragon.leagueoflegends.com/cdn/%s/img/champion/%s.png";
    
    private final Cache<String, Image> memoryCache;
    private final OkHttpClient httpClient;
    private final Path cacheDirectory;
    private final ExecutorService downloadExecutor;
    
    public AvatarManager() {
        this.memoryCache = Caffeine.newBuilder()
            .maximumSize(MEMORY_CACHE_SIZE)
            .expireAfterWrite(CACHE_EXPIRE_TIME)
            .build();
        
        this.httpClient = new OkHttpClient.Builder()
            .connectionPool(new ConnectionPool(10, 5, TimeUnit.MINUTES))
            .connectTimeout(10, TimeUnit.SECONDS)
            .readTimeout(15, TimeUnit.SECONDS)
            .build();
            
        this.cacheDirectory = Paths.get("champion_avatars");
        this.downloadExecutor = ForkJoinPool.commonPool();
        
        try {
            Files.createDirectories(cacheDirectory);
        } catch (IOException e) {
            throw new RuntimeException("Failed to create cache directory", e);
        }
    }
    
    public CompletableFuture<Image> getAvatarAsync(String championKey) {
        // 1. æ£€æŸ¥å†…å­˜ç¼“å­˜
        Image cached = memoryCache.getIfPresent(championKey);
        if (cached != null) {
            return CompletableFuture.completedFuture(cached);
        }
        
        // 2. æ£€æŸ¥æœ¬åœ°æ–‡ä»¶ç¼“å­˜
        Path localFile = getCachePath(championKey);
        if (Files.exists(localFile)) {
            return CompletableFuture.supplyAsync(() -> {
                try {
                    Image image = new Image(localFile.toUri().toString());
                    memoryCache.put(championKey, image);
                    return image;
                } catch (Exception e) {
                    return getDefaultImage();
                }
            }, downloadExecutor);
        }
        
        // 3. ä»ç½‘ç»œä¸‹è½½
        return downloadAvatarAsync(championKey);
    }
    
    private CompletableFuture<Image> downloadAvatarAsync(String championKey) {
        return CompletableFuture.supplyAsync(() -> {
            try {
                String url = buildAvatarUrl(championKey);
                Request request = new Request.Builder().url(url).build();
                
                try (Response response = httpClient.newCall(request).execute()) {
                    if (!response.isSuccessful()) {
                        return getDefaultImage();
                    }
                    
                    byte[] imageData = response.body().bytes();
                    
                    // ä¿å­˜åˆ°æœ¬åœ°ç¼“å­˜
                    saveToLocalCache(championKey, imageData);
                    
                    // åˆ›å»ºImageå¯¹è±¡
                    ByteArrayInputStream inputStream = new ByteArrayInputStream(imageData);
                    Image image = new Image(inputStream);
                    
                    // åŠ å…¥å†…å­˜ç¼“å­˜
                    memoryCache.put(championKey, image);
                    
                    return image;
                }
            } catch (Exception e) {
                logger.warn("Failed to download avatar for: " + championKey, e);
                return getDefaultImage();
            }
        }, downloadExecutor);
    }
}
```

#### 3. å“åº”å¼å¸ƒå±€ç®¡ç†å™¨
```java
@Component
public class ResponsiveLayoutManager {
    private static final int MIN_COLUMNS = 3;
    private static final int MAX_COLUMNS = 12;
    private static final int BUTTON_WIDTH_WITH_SPACING = 130; // 120px + 10px
    private static final int WINDOW_MARGIN = 60; // æ»šåŠ¨æ¡å’Œè¾¹è·
    
    public int calculateOptimalColumns(double windowWidth) {
        double availableWidth = windowWidth - WINDOW_MARGIN;
        int calculatedColumns = (int) (availableWidth / BUTTON_WIDTH_WITH_SPACING);
        return Math.max(MIN_COLUMNS, Math.min(MAX_COLUMNS, calculatedColumns));
    }
    
    public void rearrangeChampionGrid(GridPane gridPane, 
                                     List<Node> championButtons, 
                                     int newColumns) {
        // æ¸…é™¤ç°æœ‰å¸ƒå±€
        gridPane.getChildren().clear();
        
        // é‡æ–°æ’åˆ—
        for (int i = 0; i < championButtons.size(); i++) {
            int row = i / newColumns;
            int col = i % newColumns;
            
            Node championButton = championButtons.get(i);
            GridPane.setConstraints(championButton, col, row);
            gridPane.getChildren().add(championButton);
        }
        
        // é‡æ–°é…ç½®åˆ—æƒé‡
        gridPane.getColumnConstraints().clear();
        for (int i = 0; i < newColumns; i++) {
            ColumnConstraints constraints = new ColumnConstraints();
            constraints.setHgrow(Priority.ALWAYS);
            constraints.setPercentWidth(100.0 / newColumns);
            gridPane.getColumnConstraints().add(constraints);
        }
    }
}
```

#### 4. æŠ€èƒ½ç®¡ç†å™¨å®ç°
```java
@Service
public class SkillsManager {
    private static final String SKILLS_API_TEMPLATE = 
        "https://ddragon.leagueoflegends.com/cdn/%s/data/zh_CN/champion/%s.json";
    
    private final Cache<String, ChampionSkills> skillsCache;
    private final OkHttpClient httpClient;
    private final ObjectMapper objectMapper;
    
    public SkillsManager() {
        this.skillsCache = Caffeine.newBuilder()
            .maximumSize(100)
            .expireAfterWrite(Duration.ofHours(1))
            .build();
            
        this.httpClient = new OkHttpClient(); // å¯ä»¥å¤ç”¨AvatarManagerçš„client
        this.objectMapper = new ObjectMapper();
    }
    
    public CompletableFuture<ChampionSkills> getSkillsAsync(String championKey) {
        // æ£€æŸ¥ç¼“å­˜
        ChampionSkills cached = skillsCache.getIfPresent(championKey);
        if (cached != null) {
            return CompletableFuture.completedFuture(cached);
        }
        
        // ä»APIè·å–
        return CompletableFuture.supplyAsync(() -> {
            try {
                String version = getChampionVersion(championKey);
                String correctedKey = getCorrectedKey(championKey);
                String url = String.format(SKILLS_API_TEMPLATE, version, correctedKey);
                
                Request request = new Request.Builder().url(url).build();
                try (Response response = httpClient.newCall(request).execute()) {
                    if (!response.isSuccessful()) {
                        return createEmptySkills();
                    }
                    
                    JsonNode root = objectMapper.readTree(response.body().string());
                    JsonNode championData = root.path("data").elements().next();
                    
                    ChampionSkills skills = parseSkillsData(championData);
                    skillsCache.put(championKey, skills);
                    
                    return skills;
                }
            } catch (Exception e) {
                logger.warn("Failed to get skills for: " + championKey, e);
                return createEmptySkills();
            }
        });
    }
    
    private ChampionSkills parseSkillsData(JsonNode championData) {
        ChampionSkills skills = new ChampionSkills();
        
        // è§£æè¢«åŠ¨æŠ€èƒ½
        JsonNode passiveNode = championData.path("passive");
        skills.setPassive(parseSkill(passiveNode));
        
        // è§£æä¸»åŠ¨æŠ€èƒ½
        JsonNode spellsArray = championData.path("spells");
        List<Skill> spells = new ArrayList<>();
        for (JsonNode spellNode : spellsArray) {
            spells.add(parseSkill(spellNode));
        }
        skills.setSpells(spells);
        
        return skills;
    }
    
    private Skill parseSkill(JsonNode skillNode) {
        Skill skill = new Skill();
        skill.setName(skillNode.path("name").asText());
        skill.setDescription(skillNode.path("description").asText());
        skill.setTooltip(skillNode.path("tooltip").asText());
        skill.setCooldown(skillNode.path("cooldownBurn").asText());
        skill.setCost(skillNode.path("costBurn").asText());
        skill.setRange(skillNode.path("rangeBurn").asText());
        skill.setDamage(extractDamageInfo(skillNode));
        return skill;
    }
}
```

---

## ğŸ¨ UIè®¾è®¡è§„èŒƒ

### è§†è§‰é£æ ¼
- **ä¸»é¢˜è‰²å½©**: League of Legendså®˜æ–¹è‰²å½©æ–¹æ¡ˆ
  - èƒŒæ™¯: #0F1419 (æ·±è“é»‘)
  - ä¸»è¦æ–‡å­—: #C9AA71 (é‡‘è‰²)
  - æ¬¡è¦æ–‡å­—: #CDBE91 (æµ…é‡‘)
  - è¾¹æ¡†: #463714 (æš—é‡‘)
  - é€‰ä¸­çŠ¶æ€: #C89B3C (äº®é‡‘)

### ç»„ä»¶è§„æ ¼
- **è‹±é›„æŒ‰é’®**: 100x100px, åœ†è§’2px, è¾¹æ¡†2px
- **æŒ‰é’®é—´è·**: æ°´å¹³5px, å‚ç›´5px
- **è‹±é›„åç§°**: Arial 9px, ä½äºæŒ‰é’®ä¸‹æ–¹
- **æœç´¢æ¡†**: å®½åº¦40å­—ç¬¦, é«˜åº¦32px
- **æŠ€èƒ½ä¿¡æ¯**: æœ€å°é«˜åº¦150px, å¯æ»šåŠ¨

### å“åº”å¼æ–­ç‚¹
- **å°å± (< 500px)**: 3åˆ—
- **ä¸­å± (500-800px)**: 4-6åˆ—  
- **å¤§å± (800-1200px)**: 6-9åˆ—
- **è¶…å¤§å± (> 1200px)**: 9-12åˆ—

---

## âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. å†…å­˜ç®¡ç†
```java
// å¤´åƒç¼“å­˜é…ç½®
Cache<String, Image> avatarCache = Caffeine.newBuilder()
    .maximumSize(200)                    // æœ€å¤š200å¼ å¤´åƒ
    .expireAfterWrite(Duration.ofHours(24)) // 24å°æ—¶è¿‡æœŸ
    .removalListener((key, value, cause) -> {
        // æ¸…ç†èµ„æº
        if (value instanceof Image) {
            // JavaFX Imageä¼šè‡ªåŠ¨GCï¼Œæ— éœ€æ‰‹åŠ¨æ¸…ç†
        }
    })
    .build();

// æŠ€èƒ½æ•°æ®ç¼“å­˜é…ç½®  
Cache<String, ChampionSkills> skillsCache = Caffeine.newBuilder()
    .maximumSize(100)                    // æœ€å¤š100ä¸ªè‹±é›„æŠ€èƒ½æ•°æ®
    .expireAfterWrite(Duration.ofHours(1))  // 1å°æ—¶è¿‡æœŸ
    .build();
```

### 2. ç½‘ç»œä¼˜åŒ–
```java
// HTTPå®¢æˆ·ç«¯é…ç½®
OkHttpClient httpClient = new OkHttpClient.Builder()
    .connectionPool(new ConnectionPool(10, 5, TimeUnit.MINUTES))
    .connectTimeout(10, TimeUnit.SECONDS)
    .readTimeout(15, TimeUnit.SECONDS)
    .retryOnConnectionFailure(true)
    .addInterceptor(new RetryInterceptor(3)) // é‡è¯•3æ¬¡
    .build();

// å¹¶å‘æ§åˆ¶
Semaphore downloadSemaphore = new Semaphore(5); // æœ€å¤š5ä¸ªå¹¶å‘ä¸‹è½½
```

### 3. UIæ€§èƒ½
```java
// è™šæ‹ŸåŒ–æ»šåŠ¨ (å¤§é‡è‹±é›„æ—¶)
VirtualFlow<IndexedCell> virtualFlow = new VirtualFlow<>();

// å›¾ç‰‡å¼‚æ­¥åŠ è½½å›è°ƒ
avatarManager.getAvatarAsync(championKey)
    .thenAccept(image -> Platform.runLater(() -> {
        if (buttonStillExists(button)) { // æ£€æŸ¥æŒ‰é’®æ˜¯å¦è¿˜å­˜åœ¨
            button.setGraphic(new ImageView(image));
        }
    }));

// é˜²æŠ–å¤„ç†
Timeline debounceTimer = new Timeline(
    new KeyFrame(Duration.millis(200), e -> performAction())
);
```

---

## ğŸ”§ é…ç½®ç®¡ç†

### åº”ç”¨é…ç½®
```java
@ConfigurationProperties(prefix = "champion.selector")
public class ChampionSelectorConfig {
    private int searchDebounceMs = 200;
    private int resizeDebounceMs = 300;
    private int maxConcurrentDownloads = 5;
    private String cacheDirectory = "champion_cache";
    private Duration cacheExpireTime = Duration.ofHours(24);
    
    // getters and setters
}
```

### è‹±é›„ç‰ˆæœ¬æ˜ å°„
```java
public class ChampionVersionMapping {
    private static final Map<String, String> VERSION_MAP = Map.of(
        "Mel", "15.2.1",
        "Ambessa", "14.24.1", 
        "Smolder", "14.24.1",
        "Aurora", "14.24.1",
        "Hwei", "14.1.1"
    );
    
    private static final String DEFAULT_VERSION = "14.24.1";
    
    public static String getVersion(String championKey) {
        return VERSION_MAP.getOrDefault(championKey, DEFAULT_VERSION);
    }
}
```

---

## ğŸš¨ é”™è¯¯å¤„ç†ç­–ç•¥

### 1. ç½‘ç»œå¼‚å¸¸å¤„ç†
```java
public CompletableFuture<Image> downloadWithRetry(String url, int maxRetries) {
    return CompletableFuture.supplyAsync(() -> {
        Exception lastException = null;
        
        for (int attempt = 1; attempt <= maxRetries; attempt++) {
            try {
                return downloadImage(url);
            } catch (IOException e) {
                lastException = e;
                if (attempt < maxRetries) {
                    try {
                        Thread.sleep(1000 * attempt); // æŒ‡æ•°é€€é¿
                    } catch (InterruptedException ie) {
                        Thread.currentThread().interrupt();
                        break;
                    }
                }
            }
        }
        
        logger.warn("Failed to download after {} attempts: {}", maxRetries, url, lastException);
        return getDefaultImage();
    });
}
```

### 2. æ•°æ®å¼‚å¸¸å¤„ç†
```java
public ChampionSkills parseSkillsSafely(JsonNode data) {
    try {
        return parseSkills(data);
    } catch (Exception e) {
        logger.warn("Failed to parse skills data", e);
        return ChampionSkills.createEmpty();
    }
}
```

### 3. UIå¼‚å¸¸å¤„ç†
```java
@ControllerAdvice
public class UIExceptionHandler {
    @EventHandler
    public void handleException(Exception e) {
        Platform.runLater(() -> {
            Alert alert = new Alert(Alert.AlertType.ERROR);
            alert.setTitle("é”™è¯¯");
            alert.setHeaderText("åº”ç”¨ç¨‹åºé‡åˆ°é”™è¯¯");
            alert.setContentText(e.getMessage());
            alert.showAndWait();
        });
    }
}
```

---

## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

### æ€§èƒ½ç›‘æ§
```java
@Component
public class PerformanceMonitor {
    private final MeterRegistry meterRegistry;
    
    public void recordImageLoadTime(String championKey, Duration loadTime) {
        Timer.Sample sample = Timer.start(meterRegistry);
        sample.stop(Timer.builder("image.load.time")
            .tag("champion", championKey)
            .register(meterRegistry));
    }
    
    public void recordSearchTime(String query, Duration searchTime) {
        meterRegistry.timer("search.time", "query.length", String.valueOf(query.length()))
            .record(searchTime);
    }
}
```

### æ—¥å¿—é…ç½®
```xml
<!-- logback-spring.xml -->
<configuration>
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>
    
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/champion-selector.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/champion-selector.%d{yyyy-MM-dd}.log</fileNamePattern>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
    </appender>
    
    <logger name="com.example.champion" level="DEBUG"/>
    <root level="INFO">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </root>
</configuration>
```

---

## ğŸ” æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•
```java
@ExtendWith(MockitoExtension.class)
class AvatarManagerTest {
    @Mock
    private OkHttpClient httpClient;
    
    @InjectMocks
    private AvatarManager avatarManager;
    
    @Test
    void shouldReturnCachedImage() {
        // æµ‹è¯•ç¼“å­˜åŠŸèƒ½
    }
    
    @Test
    void shouldHandleNetworkFailure() {
        // æµ‹è¯•ç½‘ç»œå¼‚å¸¸å¤„ç†
    }
}
```

### é›†æˆæµ‹è¯•
```java
@SpringBootTest
@TestPropertySource(properties = {
    "champion.selector.cache-directory=test-cache"
})
class ChampionSelectorIntegrationTest {
    @Test
    void shouldLoadChampionsSuccessfully() {
        // ç«¯åˆ°ç«¯æµ‹è¯•
    }
}
```

### UIæµ‹è¯•
```java
@ExtendWith(ApplicationExtension.class)
class ChampionSelectorUITest {
    @Test
    void shouldRespondToWindowResize(FxRobot robot) {
        // æµ‹è¯•å“åº”å¼å¸ƒå±€
    }
    
    @Test
    void shouldFilterChampionsOnSearch(FxRobot robot) {
        // æµ‹è¯•æœç´¢åŠŸèƒ½
    }
}
```

---

## ğŸ“¦ éƒ¨ç½²å’Œæ‰“åŒ…

### Mavené…ç½®
```xml
<properties>
    <javafx.version>17.0.2</javafx.version>
    <javafx.maven.plugin.version>0.0.8</javafx.maven.plugin.version>
</properties>

<dependencies>
    <dependency>
        <groupId>org.openjfx</groupId>
        <artifactId>javafx-controls</artifactId>
        <version>${javafx.version}</version>
    </dependency>
    <dependency>
        <groupId>org.openjfx</groupId>
        <artifactId>javafx-fxml</artifactId>
        <version>${javafx.version}</version>
    </dependency>
    <dependency>
        <groupId>com.squareup.okhttp3</groupId>
        <artifactId>okhttp</artifactId>
        <version>4.12.0</version>
    </dependency>
    <dependency>
        <groupId>com.github.ben-manes.caffeine</groupId>
        <artifactId>caffeine</artifactId>
        <version>3.1.8</version>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.openjfx</groupId>
            <artifactId>javafx-maven-plugin</artifactId>
            <version>${javafx.maven.plugin.version}</version>
            <configuration>
                <mainClass>com.example.ChampionSelectorApplication</mainClass>
            </configuration>
        </plugin>
        
        <plugin>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-maven-plugin</artifactId>
            <configuration>
                <image>
                    <builder>paketobuildpacks/builder:tiny</builder>
                    <env>
                        <BP_NATIVE_IMAGE>true</BP_NATIVE_IMAGE>
                    </env>
                </image>
            </configuration>
        </plugin>
    </plugins>
</build>
```

---

## ğŸ¯ å®æ–½é‡Œç¨‹ç¢‘

### Phase 1: åŸºç¡€æ¡†æ¶ (1-2å‘¨)
- [x] é¡¹ç›®æ¶æ„æ­å»º
- [x] åŸºç¡€UIå¸ƒå±€ (JavaFX + FXML)
- [x] è‹±é›„æ•°æ®æ¨¡å‹å®šä¹‰
- [x] å“åº”å¼å¸ƒå±€è®¡ç®—é€»è¾‘

### Phase 2: æ ¸å¿ƒåŠŸèƒ½ (2-3å‘¨)  
- [x] è‹±é›„ç½‘æ ¼æ˜¾ç¤º
- [x] æœç´¢åŠŸèƒ½å®ç°
- [x] å¤´åƒä¸‹è½½å’Œç¼“å­˜ç³»ç»Ÿ
- [x] åŸºç¡€äº¤äº’é€»è¾‘

### Phase 3: é«˜çº§åŠŸèƒ½ (2-3å‘¨)
- [x] æŠ€èƒ½ä¿¡æ¯ç³»ç»Ÿ
- [x] æ€§èƒ½ä¼˜åŒ– (ç¼“å­˜ã€å¼‚æ­¥)
- [x] é”™è¯¯å¤„ç†å’Œå®¹é”™
- [x] å“åº”å¼å¸ƒå±€é‡æ’

### Phase 4: å®Œå–„å’Œä¼˜åŒ– (1-2å‘¨)
- [x] UIç»†èŠ‚æ‰“ç£¨
- [x] æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–
- [x] æ–‡æ¡£å®Œå–„
- [x] éƒ¨ç½²é…ç½®

---

## ğŸ“‹ æŠ€æœ¯å€ºåŠ¡å’Œåç»­ä¼˜åŒ–

### çŸ­æœŸä¼˜åŒ–
1. **è™šæ‹ŸåŒ–æ»šåŠ¨**: å¤„ç†å¤§é‡è‹±é›„æ—¶çš„æ€§èƒ½é—®é¢˜
2. **å›¾ç‰‡é¢„åŠ è½½**: æ™ºèƒ½é¢„æµ‹ç”¨æˆ·å¯èƒ½é€‰æ‹©çš„è‹±é›„
3. **æœç´¢ç®—æ³•ä¼˜åŒ–**: å®ç°æ›´æ™ºèƒ½çš„æ¨¡ç³ŠåŒ¹é…
4. **ä¸»é¢˜ç³»ç»Ÿ**: æ”¯æŒå¤šç§è§†è§‰ä¸»é¢˜

### é•¿æœŸè§„åˆ’
1. **å›½é™…åŒ–æ”¯æŒ**: å¤šè¯­è¨€ç•Œé¢
2. **æ’ä»¶æ¶æ„**: æ”¯æŒç¬¬ä¸‰æ–¹æ‰©å±•
3. **æ•°æ®åŒæ­¥**: è‡ªåŠ¨æ›´æ–°è‹±é›„æ•°æ®
4. **ä¸ªæ€§åŒ–**: ç”¨æˆ·åå¥½è®°å¿†

---

## ğŸ“ è”ç³»å’Œæ”¯æŒ

### æŠ€æœ¯æ”¯æŒ
- **æ–‡æ¡£**: [é¡¹ç›®Wiki](https://github.com/example/champion-selector/wiki)
- **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/example/champion-selector/issues)
- **è®¨è®º**: [GitHub Discussions](https://github.com/example/champion-selector/discussions)

### è´¡çŒ®æŒ‡å—
1. Forké¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»ºPull Request

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2024å¹´7æœˆ15æ—¥  
**é€‚ç”¨ç‰ˆæœ¬**: Java 17+, JavaFX 17+