<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import javafx.collections.FXCollections?>
<?import java.lang.String?>

<VBox xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.lol.championselector.controller.AutoAcceptController" spacing="5.0">
   <padding>
      <Insets bottom="10.0" left="15.0" right="15.0" top="10.0" />
   </padding>
   <children>
      <!-- 标题和状态栏 -->
      <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="header-bar">
         <padding>
            <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
         </padding>
         <children>
            <Label text="LOL助手" styleClass="title">
               <font>
                  <Font name="Microsoft YaHei Bold" size="18.0" />
               </font>
            </Label>
            <Region HBox.hgrow="ALWAYS" />
            <Label fx:id="connectionStatusLabel" text="未连接" styleClass="status-small" />
            <Button fx:id="languageToggleButton" onAction="#onLanguageToggle" text="中→EN" styleClass="secondary-button" />
            <Button fx:id="connectButton" onAction="#onConnectClicked" text="连接" styleClass="primary-button" />
            <Button fx:id="disconnectButton" disable="true" onAction="#onDisconnectClicked" text="断开" />
         </children>
      </HBox>
      
      <!-- 主功能区域 - 使用TabPane -->
      <TabPane fx:id="mainTabPane" VBox.vgrow="ALWAYS" tabClosingPolicy="UNAVAILABLE">
         <tabs>
            <!-- 自动功能页 -->
            <Tab text="自动功能">
               <content>
                  <VBox spacing="10.0" styleClass="tab-content">
                     <padding>
                        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                     </padding>
                     <children>
                        <!-- 自动接受卡片 -->
                        <VBox spacing="8.0" styleClass="card">
                           <padding>
                              <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                           </padding>
                           <children>
                              <Label text="自动接受对局" styleClass="card-title">
                                 <font>
                                    <Font name="Microsoft YaHei Bold" size="14.0" />
                                 </font>
                              </Label>
                              <HBox alignment="CENTER_LEFT" spacing="10.0">
                                 <children>
                                    <CheckBox fx:id="autoAcceptCheckBox" onAction="#onAutoAcceptToggled" text="启用自动接受" />
                                    <Region HBox.hgrow="ALWAYS" />
                                    <Label text="检查间隔:" />
                                    <Spinner fx:id="checkIntervalSpinner" editable="true" prefWidth="100.0" />
                                    <Label text="ms" />
                                 </children>
                              </HBox>
                           </children>
                        </VBox>
                        
                        <!-- 分路预设卡片 -->
                        <VBox spacing="8.0" styleClass="card">
                           <padding>
                              <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                           </padding>
                           <children>
                              <Label text="分路预设" styleClass="card-title">
                                 <font>
                                    <Font name="Microsoft YaHei Bold" size="14.0" />
                                 </font>
                              </Label>
                              <CheckBox fx:id="usePositionPresetsCheckBox" onAction="#onUsePositionPresetsToggled" text="启用分路自动选择" />
                              <HBox alignment="CENTER_LEFT" spacing="10.0" fx:id="positionPresetsContainer">
                                 <children>
                                    <Label text="当前分路:" />
                                    <ComboBox fx:id="positionComboBox" onAction="#onPositionSelectionChanged" prefWidth="120.0" promptText="选择分路" />
                                    <Label fx:id="currentPositionStatusLabel" text="未检测到分路" styleClass="hint-small" />
                                    <Region HBox.hgrow="ALWAYS" />
                                    <Button fx:id="editPositionConfigButton" onAction="#onEditPositionConfigClicked" text="编辑配置" styleClass="secondary-button" />
                                 </children>
                              </HBox>
                              <!-- 分路预设预览区 -->
                              <HBox fx:id="positionPreviewContainer" spacing="10.0" alignment="CENTER_LEFT">
                                 <padding>
                                    <Insets top="5.0" />
                                 </padding>
                              </HBox>
                           </children>
                        </VBox>
                        
                        <!-- Ban/Pick设置卡片 -->
                        <VBox spacing="8.0" styleClass="card">
                           <padding>
                              <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                           </padding>
                           <children>
                              <Label text="Ban/Pick 设置" styleClass="card-title">
                                 <font>
                                    <Font name="Microsoft YaHei Bold" size="14.0" />
                                 </font>
                              </Label>
                              
                              <!-- Ban设置 -->
                              <VBox spacing="5.0">
                                 <children>
                                    <CheckBox fx:id="autoBanCheckBox" onAction="#onAutoBanToggled" text="自动Ban英雄" />
                                    <!-- Ban队列状态显示 -->
                                    <VBox fx:id="banQueueStatus" spacing="3.0" visible="false">
                                       <padding>
                                          <Insets left="20.0" />
                                       </padding>
                                       <children>
                                          <Label fx:id="banQueueLabel" text="队列状态: " styleClass="hint-small" />
                                          <HBox fx:id="banQueuePreview" spacing="5.0" alignment="CENTER_LEFT">
                                             <children>
                                                <!-- 动态添加的队列预览项 -->
                                             </children>
                                          </HBox>
                                       </children>
                                    </VBox>
                                    <!-- Ban执行模式设置 -->
                                    <VBox spacing="3.0">
                                       <padding>
                                          <Insets left="20.0" />
                                       </padding>
                                       <children>
                                          <Label text="Ban执行模式：" styleClass="hint-small" />
                                          <HBox spacing="10.0" alignment="CENTER_LEFT">
                                             <children>
                                                <CheckBox fx:id="useSimpleDelayBanCheckBox" onAction="#onUseSimpleDelayBanToggled" text="简单延迟执行" />
                                                <Label text="延迟时间:" />
                                                <Spinner fx:id="simpleBanDelaySpinner" editable="true" prefWidth="80.0" />
                                                <Label text="秒" />
                                             </children>
                                          </HBox>
                                       </children>
                                    </VBox>
                                 </children>
                              </VBox>
                              
                              <Separator />
                              
                              <!-- Pick设置 -->
                              <VBox spacing="5.0">
                                 <children>
                                    <CheckBox fx:id="autoPickCheckBox" onAction="#onAutoPickToggled" text="自动Pick英雄" />
                                    <!-- Pick队列状态显示 -->
                                    <VBox fx:id="pickQueueStatus" spacing="3.0" visible="false">
                                       <padding>
                                          <Insets left="20.0" />
                                       </padding>
                                       <children>
                                          <Label fx:id="pickQueueLabel" text="队列状态: " styleClass="hint-small" />
                                          <HBox fx:id="pickQueuePreview" spacing="5.0" alignment="CENTER_LEFT">
                                             <children>
                                                <!-- 动态添加的队列预览项 -->
                                             </children>
                                          </HBox>
                                       </children>
                                    </VBox>
                                 </children>
                              </VBox>
                           </children>
                        </VBox>
                     </children>
                  </VBox>
               </content>
            </Tab>
            
            <!-- 系统设置页 -->
            <Tab text="系统设置">
               <content>
                  <VBox spacing="10.0" styleClass="tab-content">
                     <padding>
                        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                     </padding>
                     <children>
                        <!-- 常规设置卡片 -->
                        <VBox spacing="8.0" styleClass="card">
                           <padding>
                              <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                           </padding>
                           <children>
                              <Label text="常规设置" styleClass="card-title">
                                 <font>
                                    <Font name="Microsoft YaHei Bold" size="14.0" />
                                 </font>
                              </Label>
                              <CheckBox fx:id="systemTrayCheckBox" onAction="#onSystemTrayToggled" text="启用系统托盘" />
                              <CheckBox fx:id="minimizeOnCloseCheckBox" onAction="#onMinimizeOnCloseToggled" text="关闭窗口时最小化到托盘" />
                              <CheckBox fx:id="autoStartCheckBox" onAction="#onAutoStartToggled" text="开机自动启动" />
                              <Label fx:id="autoStartStatusLabel" text="状态: 检查中" styleClass="hint-small" />
                              <Label fx:id="trayStatusLabel" text="托盘状态: 检查中" styleClass="hint-small" />
                           </children>
                        </VBox>
                        
                        <!-- 连接设置卡片 -->
                        <VBox spacing="8.0" styleClass="card">
                           <padding>
                              <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                           </padding>
                           <children>
                              <Label text="连接设置" styleClass="card-title">
                                 <font>
                                    <Font name="Microsoft YaHei Bold" size="14.0" />
                                 </font>
                              </Label>
                              <CheckBox fx:id="autoConnectCheckBox" onAction="#onAutoConnectToggled" text="启动时自动连接到游戏客户端" />
                              <CheckBox fx:id="autoReconnectCheckBox" onAction="#onAutoReconnectToggled" text="断线后自动重连" />
                           </children>
                        </VBox>
                        
                        <!-- 弹窗抑制卡片 -->
                        <VBox spacing="8.0" styleClass="card">
                           <padding>
                              <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                           </padding>
                           <children>
                              <Label text="智能弹窗抑制" styleClass="card-title">
                                 <font>
                                    <Font name="Microsoft YaHei Bold" size="14.0" />
                                 </font>
                              </Label>
                              <Label text="抑制以下阶段的弹窗提醒：" styleClass="hint-small" />
                              <CheckBox fx:id="suppressReadyCheckCheckBox" onAction="#onSuppressReadyCheckToggled" text="准备检查阶段" />
                              <CheckBox fx:id="suppressBanPhaseCheckBox" onAction="#onSuppressBanPhaseToggled" text="Ban英雄阶段" />
                              <CheckBox fx:id="suppressPickPhaseCheckBox" onAction="#onSuppressPickPhaseToggled" text="Pick英雄阶段" />
                              <Label fx:id="suppressionStatusLabel" text="弹窗抑制未启用" styleClass="hint-small" wrapText="true" />
                           </children>
                        </VBox>
                        
                     </children>
                  </VBox>
               </content>
            </Tab>
            
            <!-- 高级设置页 -->
            <Tab text="高级">
               <content>
                  <VBox spacing="10.0" styleClass="tab-content">
                     <padding>
                        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                     </padding>
                     <children>
                        <!-- 调试设置卡片 -->
                        <VBox spacing="8.0" styleClass="card">
                           <padding>
                              <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                           </padding>
                           <children>
                              <Label text="调试设置" styleClass="card-title">
                                 <font>
                                    <Font name="Microsoft YaHei Bold" size="14.0" />
                                 </font>
                              </Label>
                              <Label text="日志级别：" />
                              <ComboBox fx:id="logLevelComboBox" prefWidth="150.0">
                                 <items>
                                    <FXCollections fx:factory="observableArrayList">
                                       <String fx:value="INFO" />
                                       <String fx:value="DEBUG" />
                                       <String fx:value="WARN" />
                                       <String fx:value="ERROR" />
                                    </FXCollections>
                                 </items>
                              </ComboBox>
                           </children>
                        </VBox>
                        
                        <Region VBox.vgrow="ALWAYS" />
                     </children>
                  </VBox>
               </content>
            </Tab>
         </tabs>
      </TabPane>
      
      <!-- 状态显示区域（可折叠） -->
      <TitledPane text="状态信息" expanded="false" styleClass="status-pane">
         <content>
            <TextArea fx:id="statusTextArea" editable="false" prefHeight="100.0" promptText="等待状态更新" wrapText="true" />
         </content>
      </TitledPane>
   </children>
</VBox>